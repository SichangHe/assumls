# AssumLS

AssumLS enforces documented assumptions across a workspace and
exposes LSP features (hover, completion, rename) plus a CLI checker.

> [!NOTE]\
> This project is currently largely generated by coding agents and
> the author has yet to manually inspect all code.

## Assumption model

- Definitions: H1 headings in `ASSUM.md` files (`# my_assumption`).
    Body lines attach to the heading.
- References: inline comment markers `@ASSUME:<assumption_name>` anywhere in
    source files (all languages).
    Keep them inside comments to avoid syntax changes.
- Scoping: the nearest directory containing an `ASSUM.md`
    defines the scope for files underneath it.

## CLI

- Run a check: `assumls check <workspace_root>`
- Exit code `0` on clean, `1` when errors are present.
    Paths are reported relative to the workspace root when possible.

## LSP

- Start the server: `assumls lsp` (default when no subcommand given).
- Hover/completion/rename operate on `@ASSUME:<name>` references and
    definitions from `ASSUM.md`.

## Development

- Format and test: `cargo fmt && cargo test`
- Clippy (CI-equivalent): `cargo clippy --all-targets --all-features`
- Update insta snapshots when outputs change: `cargo insta review`
- External tools required: `fd` and `rg` on PATH.

## Example

`main.rs`:

```rust
// @ASSUME:core_shared
fn main() {
    // @ASSUME:infra_note
}
```

`ASSUM.md`:

```markdown
Notes above the first definition are ignored.

# core_shared
Root definition for shared rules.

Second paragraph with more detail.

# infra_note
Infrastructure requirement spanning services.
```
